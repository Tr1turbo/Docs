import{_ as t}from"./chunks/triturbo_logo.DIm50g96.js";import{_ as i,a as o}from"./chunks/avatar_hierarchy.BxcHdXYA.js";import{_ as s,a as n}from"./chunks/ft_window_avatar.ICyHGrCc.js";import{_ as a}from"./chunks/blendshare.f-uX6AqU.js";import{_ as r}from"./chunks/apply_blendshapes_as_new_fbx.CrHY_UEI.js";import{_ as l}from"./chunks/fbx_target.D_BpAL9g.js";import{_ as d,a as c}from"./chunks/qpc.Dq61PmMW.js";import{_ as h,c as p,a1 as u,o as m}from"./chunks/framework.BDxlaA_J.js";const P=JSON.parse('{"title":"Face Tracking Addon Installation Guide","description":"","frontmatter":{},"headers":[],"relativePath":"face-tracking-addon/index.md","filePath":"face-tracking-addon/index.md"}'),f={name:"face-tracking-addon/index.md"};function g(b,e,y,w,v,k){return m(),p("div",null,e[0]||(e[0]=[u('<h1 id="face-tracking-addon-installation-guide" tabindex="-1"><img src="'+t+'" alt="Triturbo" style="width:32px;height:32px;vertical-align:-4px;display:inline;"> Face Tracking Addon Installation Guide <a class="header-anchor" href="#face-tracking-addon-installation-guide" aria-label="Permalink to &quot;&lt;img src=&quot;/triturbo_logo.png&quot; alt=&quot;Triturbo&quot; style=&quot;width: 32px; height: 32px; vertical-align: -4px; display: inline;&quot;/&gt; Face Tracking Addon Installation Guide&quot;">‚Äã</a></h1><h2 id="import-dependent-assets-packages" tabindex="-1">Import dependent assets &amp; packages <a class="header-anchor" href="#import-dependent-assets-packages" aria-label="Permalink to &quot;Import dependent assets &amp; packages&quot;">‚Äã</a></h2><ul><li><a href="https://modular-avatar.nadena.dev/" target="_blank" rel="noreferrer">Modular Avatar</a> (‚â•1.19)</li><li>Original Avatar</li><li><strong>BlendShare</strong>:<br> a blendshapes extract and distribute tool I developed.<br><em>Included in file</em><img src="'+i+'" alt="blendshare"></li></ul><h2 id="import-the-face-tracking-addon" tabindex="-1">Import the Face Tracking Addon <a class="header-anchor" href="#import-the-face-tracking-addon" aria-label="Permalink to &quot;Import the Face Tracking Addon&quot;">‚Äã</a></h2><ul><li>Download contents from the <a href="https://triturbo.booth.pm/" target="_blank" rel="noreferrer">Booth store</a></li><li>Import <code>.unitypackage</code> to your project</li></ul><p>A new menu will appear after import. Click the buttom at menu to open the window. <img src="'+s+'" alt="ft_window"></p><p>Drag your Avatar <em>GameObject</em> or <em>Prefab</em> into <code>Avatar</code> field. <img src="'+n+'" alt="ft_window"></p><p>Finally, click <code>Apply Face Tracking Addon</code>.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>üí° If you don&#39;t want to modify the original avatar <em>GameObject</em>, click <code>Apply Face Tracking as New Avatar</code> instead.</p></div><p>An avatar with <strong>face tracking addon</strong> will appear in <em>Hierarchy</em>. <img src="'+o+'" alt="avatar_hierarchy"></p><h2 id="how-to-get-the-fbx-file" tabindex="-1">How to get the FBX file? <a class="header-anchor" href="#how-to-get-the-fbx-file" aria-label="Permalink to &quot;How to get the FBX file?&quot;">‚Äã</a></h2><p>If you need to obtain the FBX file for further modifications, please refer to the following article.</p><p><a href="./blendshare.html">I need an FBX file with face tracking blendshapes, where can I get it?</a></p><h2 id="preset-options" tabindex="-1">Preset Options <a class="header-anchor" href="#preset-options" aria-label="Permalink to &quot;Preset Options&quot;">‚Äã</a></h2><p>During installation, you will see multiple preset options to choose from, including:</p><ul><li>HD</li><li>HD (VIVE)</li><li>HD (Quest, Pico)</li><li>SD</li></ul><p>The preset options may vary depending on the version, with more or fewer options available, each with different settings. However, all follow the naming conventions.<br> HD and SD refer to <strong>resolution</strong> differences, with HD offering higher resolution but requiring more synced parameters. The device name in parentheses indicate optimization for specific devices; if no device is listed, it is the general version, using more parameters to ensure the best performance across all devices.</p><blockquote><p>If you have multiple devices, it is recommended to select the general version.</p></blockquote><details class="details custom-block"><summary>‚öô Parameter Resolution</summary><p>Because face tracking requires a large number of parameters and uses Expression Parameters for network synchronization, VRChat has a limit of 256 bits for this.</p><ul><li><code>Bool</code> parameters require <code>1</code> bit.</li><li><code>Int</code> and <code>Float</code> require <code>8</code> bits.</li></ul><p>We use parameter quantization techniques to reduce the bit size needed for floating-point numbers.</p></details><h3 id="differences-between-vive-quest-and-pico-versions" tabindex="-1">Differences Between VIVE, Quest and Pico Versions <a class="header-anchor" href="#differences-between-vive-quest-and-pico-versions" aria-label="Permalink to &quot;Differences Between VIVE, Quest and Pico Versions&quot;">‚Äã</a></h3><p>VIVE uses SRanipal parameters, whereas the Quest and Pico devices have fewer features for eye tracking. Specifically, VIVE supports eyebrow detection, while Quest and Pico devices do not, but VIVE includes pupil diameter tracking.</p><p>Regarding mouth tracking, VIVE has features like MouthDimple, MouthStretch, and NoseSneer that are absent in Quest and Pico.</p><div class="info custom-block"><p class="custom-block-title">üí° The above description applies specifically to the <strong>VIVE Pro Eye</strong> device</p><ul><li>VIVE Focus 3 + Facial Expression Tracking Kit</li><li>VIVE Focus Vision</li><li>VIVE XR Elite + Full-Face Tracking Kit These devices do not support pupil diameter tracking.<br> Additionally, they do not support <code>EyeWide</code> (wide-open eyes) or <code>EyeSquint</code> (squinted eyes).<br> All VIVE devices show similar performance in mouth tracking.</li></ul></div><h1 id="advanced-how-to-use" tabindex="-1">Advanced: How to use <img src="'+a+'" alt="BlendShare" style="width:192px;height:48px;vertical-align:-9px;display:inline;"> <a class="header-anchor" href="#advanced-how-to-use" aria-label="Permalink to &quot;Advanced: How to use &lt;img src=&quot;/blendshare.png&quot; alt=&quot;BlendShare&quot; style=&quot;width: 192px; height: 48px; vertical-align: -9px; display: inline;&quot;/&gt;&quot;">‚Äã</a></h1><div class="info custom-block"><p class="custom-block-title">INFO</p><p><strong>BlendShare</strong> is an Unity package designed for creators who need to share blendshapes without distributing the original FBX files.<br> This tool enables the extraction of blendshapes from FBX files and stores them in a custom asset format: <code>BlendShape Data</code>.<br> These assets can be easily shared and applied to compatible FBX files.</p></div><h3 id="‚ùì-can-i-add-face-tracking-blendshapes-to-a-modified-fbx" tabindex="-1">‚ùì Can I add face tracking blendshapes to a modified FBX? <a class="header-anchor" href="#‚ùì-can-i-add-face-tracking-blendshapes-to-a-modified-fbx" aria-label="Permalink to &quot;‚ùì Can I add face tracking blendshapes to a modified FBX?&quot;">‚Äã</a></h3><p><strong>Yes!</strong> As long as you didn‚Äôt delete a single vertex, it can be consider the same mesh as original FBX.<br> (Since FaceTracking only add blendshapes to ‚ÄúBody‚Äù(face mesh) to the FBX, you can edit other meshes as you want.)</p><p>You can add your own blendshapes, modify UVs of your FBX and <strong>BlendShare</strong> can still add blendshapes to your modified FBX.</p><hr><h3 id="‚ùì-i-need-an-fbx-file-with-face-tracking-blendshapes-where-can-i-get-it" tabindex="-1">‚ùì I need an FBX file with face tracking blendshapes, where can I get it? <a class="header-anchor" href="#‚ùì-i-need-an-fbx-file-with-face-tracking-blendshapes-where-can-i-get-it" aria-label="Permalink to &quot;‚ùì I need an FBX file with face tracking blendshapes, where can I get it?&quot;">‚Äã</a></h3><p>The addon will only generate mesh assets because it is the fastest way to add blendshapes.You will need to practice the steps below to generate an FBX file.</p><ol><li><p>Locate the <strong>BlendShare</strong> data asset file at <code>Triturbo/xxx_FT/Blendshapes/xxx_FT_BlendShare</code>.</p></li><li><p>Click the asset and inspect with Inspector.</p></li><li><p>Click <code>Apply blendshapes as new FBX</code>, then you will get a FBX file with blendshapes added. <img src="'+r+'" alt="Apply Face Tracking as New Avatar"></p></li></ol><h1 id="face-tracking-addon-documents" tabindex="-1"><img src="'+t+'" alt="Triturbo" style="width:32px;height:32px;vertical-align:-4px;display:inline;"> Face Tracking Addon Documents <a class="header-anchor" href="#face-tracking-addon-documents" aria-label="Permalink to &quot;&lt;img src=&quot;/triturbo_logo.png&quot; alt=&quot;Triturbo&quot; style=&quot;width: 32px; height: 32px; vertical-align: -4px; display: inline;&quot;/&gt; Face Tracking Addon Documents&quot;">‚Äã</a></h1><p>Thank you for purchasing the Triturbo Face Tracking addon. This document will guide you through its usage and customization options.</p><p>Before reading this document, please first refer to the <a href="./installation-guide.html">Installation Guide</a> to assist with installing the addon.</p><h2 id="preset-options-1" tabindex="-1">Preset Options <a class="header-anchor" href="#preset-options-1" aria-label="Permalink to &quot;Preset Options&quot;">‚Äã</a></h2><p>During installation, you will see multiple preset options to choose from, including:</p><ul><li>HD</li><li>HD (VIVE)</li><li>HD (Quest, Pico)</li><li>SD</li></ul><p>The preset options may vary depending on the version, with more or fewer options available, each with different settings. However, all follow the naming conventions.<br> HD and SD refer to <strong>resolution</strong> differences, with HD offering higher resolution but requiring more synced parameters. The device name in parentheses indicate optimization for specific devices; if no device is listed, it is the general version, using more parameters to ensure the best performance across all devices.</p><blockquote><p>If you have multiple devices, it is recommended to select the general version.</p></blockquote><details class="details custom-block"><summary>‚öô Parameter Resolution</summary><p>Because face tracking requires a large number of parameters and uses Expression Parameters for network synchronization, VRChat has a limit of 256 bits for this.</p><ul><li><code>Bool</code> parameters require <code>1</code> bit.</li><li><code>Int</code> and <code>Float</code> require <code>8</code> bits.</li></ul><p>We use parameter quantization techniques to reduce the bit size needed for floating-point numbers.</p></details><h3 id="differences-between-vive-quest-and-pico-versions-1" tabindex="-1">Differences Between VIVE, Quest and Pico Versions <a class="header-anchor" href="#differences-between-vive-quest-and-pico-versions-1" aria-label="Permalink to &quot;Differences Between VIVE, Quest and Pico Versions&quot;">‚Äã</a></h3><p>VIVE uses SRanipal parameters, whereas the Quest and Pico devices have fewer features for eye tracking. Specifically, VIVE supports eyebrow detection, while Quest and Pico devices do not, but VIVE includes pupil diameter tracking.</p><p>Regarding mouth tracking, VIVE has features like MouthDimple, MouthStretch, and NoseSneer that are absent in Quest and Pico.</p><div class="info custom-block"><p class="custom-block-title">üí°</p><p>The above description applies specifically to the <strong>VIVE Pro Eye</strong> device.</p><ul><li>VIVE Focus 3 + Facial Expression Tracking Kit</li><li>VIVE Focus Vision</li><li>VIVE XR Elite + Full-Face Tracking Kit</li></ul><p>These devices do not support pupil diameter tracking.<br> Additionally, they do not support <code>EyeWide</code> (wide-open eyes) or <code>EyeSquint</code> (squinted eyes).<br> All VIVE devices show similar performance in mouth tracking.</p></div><h2 id="mesh-generation" tabindex="-1">Mesh Generation <a class="header-anchor" href="#mesh-generation" aria-label="Permalink to &quot;Mesh Generation&quot;">‚Äã</a></h2><p>The face-tracking mesh with blend shapes is not included in the plugin but is generated during installation via <a href="./blendshare.html"><img src="'+a+'" alt="BlendShare" style="width:96px;height:24px;vertical-align:-5px;display:inline;"></a>. When installing face tracking addon on an Avatar for the first time, the tool will generate a mesh with face-tracking blendshapes.</p><p>By default, this mesh generated from the original FBX found via <code>guid</code>, not from the mesh currently in use by your avatar.<br> Select <code>FBX currently in used by the avatar</code> to use the new FBX as the base to add blendshapes.</p><p>Mesh generation occurs only on the first installation. If you need to regenerate the mesh, delete the previously generated mesh and reinstall face tracking.</p><h3 id="mesh-generation-failures" tabindex="-1">Mesh Generation Failures <a class="header-anchor" href="#mesh-generation-failures" aria-label="Permalink to &quot;Mesh Generation Failures&quot;">‚Äã</a></h3><p>If the Avatar‚Äôs face is not visible after installing face tracking, check if you used a modified FBX imported as a new asset for the Avatar&#39;s mesh, which might have a different bone count from the original model.</p><p>Select <code>FBX currently in used by the avatar</code> in the <strong>FBX Target</strong> option. This option only appears when the mesh hasn‚Äôt yet been generated; if it has, you‚Äôll need to regenerate the mesh. <img src="'+l+'" alt="FBX Target: FBX currently in used by the avatar"></p><p>If you notice broken blendshapes after installation, use an unmodified FBX to generate the mesh.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><strong>To avoid failures when adding blend shapes to a modified FBX, please note the following:</strong></p><ul><li>Do not delete vertices in the relevant mesh, and avoid adding vertices. This can cause vertex order inconsistencies.</li><li>If blendshapes appear wrong direction, use Blender‚Äôs native exporter.</li><li>Match FBX export Scaling settings with the original model and consider <code>Apply Transform</code> options carefully. <ul><li>When you see 1m(File) to 1m (Unity) in Unity‚Äôs FBX Import Settings, select FBX Unit Scale in Blender.</li><li>Avoid selecting <code>Apply Transform</code>; if blendshapes are wrong direction, try selecting <code>Apply Transform</code> as a last resort.</li></ul></li></ul><p><strong>Permitted Changes:</strong></p><ul><li>Add bones and edit weights</li><li>Add or edit blend shapes</li><li>Edit UVs</li><li>Edit normals</li><li>Freely modify meshes unrelated to face tracking</li></ul></div><h2 id="adjusting-eye-shape-resetting" tabindex="-1">Adjusting Eye Shape Resetting <a class="header-anchor" href="#adjusting-eye-shape-resetting" aria-label="Permalink to &quot;Adjusting Eye Shape Resetting&quot;">‚Äã</a></h2><p>This face tracking system blends some blend shapes to <code>0</code> when the eyes close to prevent clipping. This process is smooth and seamless. When eyes are open, the face shape follows user-defined blend shapes, but when eyes close, the system ‚Äúresets‚Äù to <code>0</code>.</p><p>The reset intensity can be easily customized using the <a href="./eye-tracking-settings.html">Eye Tracking Settings</a> component.<br><strong>Intensity 1</strong> means the blend shapes fully reset to 0 when eyes close, while <strong>Intensity 0</strong> means no reset occurs.</p><h3 id="how-to-adjust-blendshapes-for-custom-face-shapes" tabindex="-1">How to Adjust Blendshapes for Custom Face Shapes <a class="header-anchor" href="#how-to-adjust-blendshapes-for-custom-face-shapes" aria-label="Permalink to &quot;How to Adjust Blendshapes for Custom Face Shapes&quot;">‚Äã</a></h3><p>You may customize the face shape of your Avatar in several ways. For proper functioning with the face-tracking system, refer to the methods below.</p><p>Adjust the blend shape values directly in the <code>SkinnedMeshRenderer</code> and upload in that state to VRChat.</p><p>Avoid relying <strong>solely</strong> on animation to control custom face shapes; ensure corresponding adjustments are made in the <code>SkinnedMeshRenderer</code>.</p><h3 id="about-the-separated-left-and-right-blendshapes" tabindex="-1">About the separated Left and Right Blendshapes <a class="header-anchor" href="#about-the-separated-left-and-right-blendshapes" aria-label="Permalink to &quot;About the separated Left and Right Blendshapes&quot;">‚Äã</a></h3><p>Most blendshapes for facial adjustments have separated versions for the left and right sides. Since your eyes can open and close independently, the system uses separate controls for each eye.<br> It automatically switches to the left and right versions of each blendshape, so you can adjust them as usual.</p><blockquote><p>Adjust as desired; the system will automatically switch to the left-right separated blend shapes. If issues arise, using the separated blendshapes to customize the avatar instead of combined blendshapes.</p></blockquote><h2 id="adjusting-jaw-drop-intensity" tabindex="-1">Adjusting Jaw Drop Intensity <a class="header-anchor" href="#adjusting-jaw-drop-intensity" aria-label="Permalink to &quot;Adjusting Jaw Drop Intensity&quot;">‚Äã</a></h2><p>The blend shape that controls mouth opening and jaw drop is <code>JawOpen</code>.</p><p><code>JawOpen</code> is divided into two blend shapes to facilitate fine-tuning:</p><ul><li><code>JawDrop*</code> for jaw movement</li><li><code>MouthOpen*</code> for mouth opening</li><li></li></ul><p>By default, the upper jaw remains fixed while the jaw drops.</p><p>Adjust the <code>JawDrop*</code> values in the <code>JawOpen</code> animation under <code>Animations/</code> to modify the jaw drop effect. <img src="'+d+'" alt=""></p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Adjusting <code>JawDrop*</code> allows you to customize the mouth-opening effect. When <code>JawDrop*</code> is 0, the jaw remains still, and the upper jaw moves upward as the mouth opens.</p><p>When <code>JawDrop*</code> is 100, the jaw moves downward, and the upper jaw remains fixed.</p></div><h2 id="adjusting-parameter-resolution-and-scaling" tabindex="-1">Adjusting Parameter Resolution and Scaling <a class="header-anchor" href="#adjusting-parameter-resolution-and-scaling" aria-label="Permalink to &quot;Adjusting Parameter Resolution and Scaling&quot;">‚Äã</a></h2><p>When viewing the face tracking object in the Inspector, you‚Äôll see the <a href="./quantization-parameters-creator.html">Quantization Parameters Creator</a> component displayed as shown below:</p><p><img src="'+c+'" alt=""></p><p>Each item is a parameter used by face tracking, where you can adjust <strong>resolution</strong> and <strong>scale factor</strong>. The <strong>resolution</strong> affects the final synced parameter usage.</p><h3 id="resolution" tabindex="-1">Resolution <a class="header-anchor" href="#resolution" aria-label="Permalink to &quot;Resolution&quot;">‚Äã</a></h3><p>Quantization techniques are used to reduce synced parameter usage. In <code>VRC Expression Parameters</code>, float has an <code>8-bit</code> resolution, but lowering it appropriately can reduce synced parameter usage without overly affecting quality.</p><blockquote><p>The minimum resolution value is <code>0</code> (no sync), while the maximum is <code>8</code> (equivalent to <code>float</code>).</p><p>Setting the resolution below <code>2</code> is not recommended.</p></blockquote>',78)]))}const _=h(f,[["render",g]]);export{P as __pageData,_ as default};
